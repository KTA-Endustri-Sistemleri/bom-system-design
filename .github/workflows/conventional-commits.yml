name: Conventional Commits (Commit Messages)

on:
  pull_request:
    types: [opened, synchronize, reopened, edited]

permissions:
  contents: read

jobs:
  commitlint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout (full history)
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Lint commit messages
        uses: wagoid/commitlint-github-action@v6
        with:
          commitDepth: 1
          configFile: |
            {
              "extends": ["@commitlint/config-conventional"],
              "rules": {
                "type-enum": [2, "always", [
                  "feat",
                  "fix",
                  "refactor",
                  "perf",
                  "docs",
                  "test",
                  "build",
                  "ci",
                  "chore",
                  "revert"
                ]],
                "subject-case": [0],
                "scope-case": [0],
                "header-max-length": [0],
                "body-max-line-length": [0]
              }
            }
